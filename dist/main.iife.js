!function(){"use strict";!function(){const e=document.querySelector(".custom-cursor");if(!e)return;const t="https://cdn.prod.website-files.com/68f62fcbc64d17f90e046dfa/6905079459f55e8c6f5dcfbb_cursor-interact.avif";e.style.backgroundImage=`url(${t})`,document.addEventListener("mousemove",t=>{e.style.left=t.clientX+"px",e.style.top=t.clientY+2+"px"});document.querySelectorAll('a, button, input[type="submit"], input[type="button"], select, textarea, .clickable, [onclick]').forEach(n=>{n.addEventListener("mouseenter",()=>{e.style.backgroundImage="url(https://cdn.prod.website-files.com/68f62fcbc64d17f90e046dfa/690507948080bd9a825974f5_cursor-auto.avif)"}),n.addEventListener("mouseleave",()=>{e.style.backgroundImage=`url(${t})`})})}(),function(){function e(){const e=document.querySelector(".nav_1_btn_wrap"),t=document.querySelector(".nav_hamburguer-menu"),n=document.querySelector(".nav_hamburguer-exit");if(!e)return void console.warn("‚ö†Ô∏è Hamburger toggle: .nav_1_btn_wrap not found");if(!t||!n)return void console.warn("‚ö†Ô∏è Hamburger toggle: Menu or exit icon not found. Expected classes: .nav_hamburguer-menu and .nav_hamburguer-exit");function i(){e.classList.contains("w--open")||null!==document.querySelector(".w-nav-menu.w--open")||null!==document.querySelector(".w-nav-overlay.w--open")?(t.style.display="none",n.style.display="block"):(t.style.display="block",n.style.display="none")}i();const o=new MutationObserver(i);o.observe(e,{attributes:!0,attributeFilter:["class"]});const r=document.querySelector(".w-nav-overlay");if(r){new MutationObserver(i).observe(r,{attributes:!0,attributeFilter:["class"]})}const a=document.querySelector(".w-nav-menu");if(a){new MutationObserver(i).observe(a,{attributes:!0,attributeFilter:["class"]})}window.addEventListener("beforeunload",()=>{o.disconnect()})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),function(){function e(){return new Promise(e=>{const t=document.querySelector(".transition");if(!t)return void e();const n=window.getComputedStyle(t).getPropertyValue("grid-template-columns").split(" ").length,i=window.innerWidth/n,o=Math.ceil(window.innerHeight/i);t.style.gridTemplateRows=`repeat(${o}, ${i}px)`;const r=n*o;t.innerHTML="";for(let a=0;a<r;a++){const e=document.createElement("div");e.classList.add("transition-block"),t.appendChild(e)}e()})}document.addEventListener("DOMContentLoaded",()=>{if("undefined"==typeof gsap)return void console.warn("GSAP not loaded. Page transitions will not work.");e().then(()=>{gsap.timeline({onStart:()=>{gsap.set(".transition",{background:"transparent"})},onComplete:()=>{gsap.set(".transition",{display:"none"})},defaults:{ease:"linear"}}).to(".transition-block",{opacity:0,duration:.1,stagger:{amount:.75,from:"random"}},.5)});Array.from(document.querySelectorAll("a")).filter(e=>{const t=e.getAttribute("href")||"";return new URL(e.href,window.location.origin).hostname===window.location.hostname&&!t.startsWith("#")&&"_blank"!==e.getAttribute("target")&&!e.hasAttribute("data-transition-prevent")}).forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.href;gsap.set(".transition",{display:"grid"}),gsap.fromTo(".transition-block",{autoAlpha:0},{autoAlpha:1,duration:.001,ease:"linear",stagger:{amount:.5,from:"random"},onComplete:()=>{window.location.href=n}})})}),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()}),window.addEventListener("resize",e)})}(),function(){if("undefined"==typeof THREE)return void console.warn("Three.js not loaded. CRT effect will not work.");const e=()=>window.innerWidth<768,t={scanlineOpacity:.07,scanlineCount:2e3,barrelPower:1.006,barrelPowerMobile:1,vignetteStrength:.5,vignetteStrengthMobile:0,vignetteRadius:.7,vignetteRadiusMobile:0,beamIntensity:0,beamSpeed:0,glowSize:0,noiseAmount:.03,flickerAmount:.004,chromaticAberration:.1,brightness:1},n=new THREE.WebGLRenderer({alpha:!0,premultipliedAlpha:!1,antialias:!1});n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.setClearColor(0,0),n.domElement.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    z-index: 999999;\n  ",document.body.appendChild(n.domElement);const i=new THREE.Scene,o=new THREE.OrthographicCamera(-1,1,1,-1,0,1),r=new THREE.ShaderMaterial({uniforms:{time:{value:0},resolution:{value:new THREE.Vector2(window.innerWidth,window.innerHeight)},scanlineOpacity:{value:t.scanlineOpacity},scanlineCount:{value:t.scanlineCount},barrelPower:{value:e()?t.barrelPowerMobile:t.barrelPower},vignetteStrength:{value:t.vignetteStrength},vignetteRadius:{value:t.vignetteRadius},beamIntensity:{value:t.beamIntensity},beamSpeed:{value:t.beamSpeed},glowSize:{value:t.glowSize},noiseAmount:{value:t.noiseAmount},flickerAmount:{value:t.flickerAmount},chromaticAberration:{value:t.chromaticAberration},brightness:{value:t.brightness}},vertexShader:"\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    ",fragmentShader:"\n      precision highp float;\n\n      uniform float time;\n      uniform vec2 resolution;\n      uniform float scanlineOpacity;\n      uniform float scanlineCount;\n      uniform float barrelPower;\n      uniform float vignetteStrength;\n      uniform float vignetteRadius;\n      uniform float beamIntensity;\n      uniform float beamSpeed;\n      uniform float glowSize;\n      uniform float noiseAmount;\n      uniform float flickerAmount;\n      uniform float chromaticAberration;\n      uniform float brightness;\n\n      varying vec2 vUv;\n\n      vec2 barrelDistortion(vec2 coord, float power) {\n        vec2 cc = coord - 0.5;\n        float dist = dot(cc, cc);\n        return coord + cc * dist * power;\n      }\n\n      float noise(vec2 p) {\n        return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453123);\n      }\n\n      float smoothNoise(vec2 p) {\n        vec2 i = floor(p);\n        vec2 f = fract(p);\n        f = f * f * (3.0 - 2.0 * f);\n\n        float a = noise(i);\n        float b = noise(i + vec2(1.0, 0.0));\n        float c = noise(i + vec2(0.0, 1.0));\n        float d = noise(i + vec2(1.0, 1.0));\n\n        return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);\n      }\n\n      void main() {\n        vec2 uv = vUv;\n        vec2 distortedUV = barrelDistortion(uv, barrelPower - 1.0);\n\n        float edge = 0.0;\n        if (distortedUV.x < 0.0 || distortedUV.x > 1.0 ||\n            distortedUV.y < 0.0 || distortedUV.y > 1.0) {\n          edge = 1.0;\n        }\n\n        float scanline = sin(distortedUV.y * scanlineCount) * scanlineOpacity;\n\n        float beamPos = mod(time * beamSpeed, 1.0);\n        float beamDist = abs(distortedUV.y - beamPos);\n        float beam = smoothstep(glowSize, 0.0, beamDist) * beamIntensity;\n        float beamTrail = smoothstep(glowSize * 2.5, glowSize * 0.5, beamDist) * beamIntensity * 0.2;\n\n        float staticNoise = smoothNoise(distortedUV * 800.0 + time * 5.0) * noiseAmount;\n\n        vec2 position = distortedUV - 0.5;\n        float dist = length(position);\n        float vignette = smoothstep(vignetteRadius, vignetteRadius - 0.3, dist);\n        float edgeVignette = smoothstep(0.5, 0.7, dist) * vignetteStrength;\n\n        float flicker = sin(time * 100.0) * flickerAmount;\n\n        float darkness = 0.0;\n        darkness += scanline;\n        darkness += beam + beamTrail;\n        darkness += staticNoise;\n        darkness += edgeVignette;\n        darkness += flicker;\n\n        darkness *= vignette;\n        darkness = mix(darkness, 1.0, edge);\n        darkness *= brightness;\n\n        gl_FragColor = vec4(0.0, 0.0, 0.0, darkness);\n      }\n    ",transparent:!0,blending:THREE.NormalBlending,depthTest:!1,depthWrite:!1}),a=new THREE.PlaneGeometry(2,2),l=new THREE.Mesh(a,r);i.add(l),window.addEventListener("resize",function(){const i=window.innerWidth,o=window.innerHeight;n.setSize(i,o),r.uniforms.resolution.value.set(i,o),r.uniforms.barrelPower.value=e()?t.barrelPowerMobile:t.barrelPower}),function e(t){r.uniforms.time.value=.001*t,n.render(i,o),requestAnimationFrame(e)}(0),window.crtConfig=t,window.updateCRT=()=>{Object.keys(t).forEach(e=>{r.uniforms[e]&&(r.uniforms[e].value=t[e])}),r.uniforms.barrelPower.value=e()?t.barrelPowerMobile:t.barrelPower}}(),window.addEventListener("load",()=>{if("undefined"==typeof gsap||"undefined"==typeof ScrollTrigger)return void console.warn("GSAP/ScrollTrigger not loaded. Pixelate reveal will not work.");const e=document.querySelectorAll("[data-pixelate-img]");function t(e){const t=e.parentElement;if(!t)return;const n=document.createElement("canvas"),i=n.getContext("2d",{willReadFrequently:!1});n.width=e.naturalWidth,n.height=e.naturalHeight,Object.assign(n.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:"2"}),"static"===getComputedStyle(t).position&&(t.style.position="relative"),e.style.opacity="0",t.appendChild(n);const o=[50,30,20,10,5,2,1];a(o[0]);const r=gsap.timeline({scrollTrigger:{trigger:t,start:"top 80%",toggleActions:"play none none none"}});function a(t){const o=n.width,r=n.height;i.imageSmoothingEnabled=!1,i.clearRect(0,0,o,r);const a=Math.max(1,Math.ceil(o/t)),l=Math.max(1,Math.ceil(r/t)),s=document.createElement("canvas"),d=s.getContext("2d");s.width=a,s.height=l,d.drawImage(e,0,0,a,l),i.drawImage(s,0,0,o,r)}o.forEach((e,t)=>{r.call(()=>a(e),null,.15*t)}),r.call(()=>{n.remove(),e.style.opacity="1"})}0!==e.length&&e.forEach(e=>{e.complete&&e.naturalWidth>0?t(e):(e.addEventListener("load",()=>t(e)),e.addEventListener("error",()=>{console.warn("Failed to load image:",e.src)}))})}),console.log("Typewriter + ScrollTrigger loaded"),window.addEventListener("DOMContentLoaded",()=>{if("undefined"==typeof gsap||"undefined"==typeof ScrollTrigger)return void console.warn("GSAP/ScrollTrigger not loaded. Typewriter effect will not work.");gsap.registerPlugin(ScrollTrigger);const e=document.querySelectorAll("[data-typewriter]");console.log(`Found ${e.length} typewriter elements`),e.forEach(e=>{ScrollTrigger.create({trigger:e,start:"top 80%",once:!0,onEnter:()=>{console.log("Element in view - starting typewriter"),function(e,t=15){const n=e.getAttribute("data-text")||e.textContent,i=n.split(""),o=e.offsetHeight,r=e.offsetWidth;e.style.minHeight=`${o}px`,e.style.minWidth=`${r}px`,e.style.display="inline-block",e.textContent="",e.style.visibility="visible",console.log(`Typing: "${n}"`);let a=0;setTimeout(function n(){if(a<i.length){e.textContent+=i[a],a++;const o=10*Math.random()-5;setTimeout(n,t+o)}else console.log("Typing complete!")},100)}(e,15)}})})}),window.addEventListener("DOMContentLoaded",function(){if("undefined"==typeof gsap||"undefined"==typeof ScrollTrigger)return void console.warn("GSAP/ScrollTrigger not loaded. SVG flash animation will not work.");const e=document.querySelector("[data-hero-title]");if(!e)return;const t=gsap.timeline({scrollTrigger:{trigger:e,start:"top 80%",once:!0}});gsap.set(e,{opacity:0,scale:1.2,filter:"brightness(0)"}),t.to(e,{opacity:1,filter:"brightness(3)",duration:.05}).to(e,{opacity:0,filter:"brightness(0)",duration:.03}).to(e,{opacity:1,filter:"brightness(3)",duration:.05}).to(e,{opacity:0,filter:"brightness(0)",duration:.03}).to(e,{opacity:1,filter:"brightness(3)",duration:.05}).to(e,{scale:1,filter:"brightness(1)",duration:.4,ease:"power2.out"}),gsap.fromTo(e,{opacity:1},{opacity:.4,duration:.7,repeat:-1,yoyo:!0,ease:"steps(1)",delay:2})}),document.addEventListener("DOMContentLoaded",()=>{"undefined"!=typeof gsap?document.querySelectorAll("[data-pixel-burst]").forEach(e=>{e.addEventListener("click",e=>{!function(e,t){const n=["#ffff00","#ffaa00","#ff6600","#ffffff","#ffdd00"];for(let i=0;i<8;i++){const o=document.createElement("div"),r=45*i+(30*Math.random()-15),a=n[Math.floor(Math.random()*n.length)],l=Math.random()>.5?8:6;o.style.cssText=`\n          position: fixed;\n          width: ${l}px;\n          height: ${l}px;\n          background: ${a};\n          box-shadow: 0 0 4px ${a};\n          left: ${e}px;\n          top: ${t}px;\n          pointer-events: none;\n          z-index: 9999;\n        `,document.body.appendChild(o);const s=40+40*Math.random(),d=r*Math.PI/180;gsap.to(o,{x:Math.cos(d)*s,y:Math.sin(d)*s+20,opacity:0,scale:0,duration:.8,ease:"steps(8)",onComplete:()=>o.remove()})}}(e.clientX,e.clientY)})}):console.warn("GSAP not loaded. Pixel burst effect will not work.")}),function(){const e={storageKey:"emailGateSubmitted",expiryDays:7,hideDelay:4e3,animationDelay:300,triggerThreshold:.5,scrollThrottleMs:100},t={selector:".swiper-videos",navigation:{nextEl:'[data-swiper="next-video"]',prevEl:'[data-swiper="prev-video"]'},pagination:{el:'[data-swiper="pagination"]'},breakpoints:{478:{slidesPerView:1,spaceBetween:0},768:{slidesPerView:1,spaceBetween:0},992:{slidesPerView:1,spaceBetween:0}},slidesPerView:1,spaceBetween:0},n={selector:".swiper-cases",navigation:{nextEl:'[data-swiper="next-case"]',prevEl:'[data-swiper="prev-case"]'},pagination:{el:'[data-swiper="pagination-case"]'},breakpoints:{478:{slidesPerView:1,spaceBetween:16},768:{slidesPerView:1,spaceBetween:16},992:{slidesPerView:2,spaceBetween:16}},slidesPerView:1,spaceBetween:20};function i(e){const t={value:!0,expiry:(new Date).getTime()+24*e.expiryDays*60*60*1e3};try{return localStorage.setItem(e.storageKey,JSON.stringify(t)),console.log(`üíæ Saved with ${e.expiryDays}-day expiry`),!0}catch(n){return console.error("‚ùå Failed to save:",n),!1}}function o(e,t){if("undefined"==typeof Swiper)return console.warn("Swiper library not loaded"),null;if(!document.querySelector(e.selector))return console.warn(`‚ö†Ô∏è Swiper container not found: ${e.selector}`),null;const n={slidesPerView:e.slidesPerView,spaceBetween:e.spaceBetween,loop:!1,speed:600,navigation:{nextEl:e.navigation.nextEl,prevEl:e.navigation.prevEl,disabledClass:"is-disabled"},pagination:{el:e.pagination.el,clickable:!0,bulletClass:"swiper_bullet",bulletActiveClass:"is-active",renderBullet:function(e,t){return`<button class="${t}" aria-label="Slide ${e+1}"></button>`}},breakpoints:e.breakpoints,keyboard:{enabled:!0},watchOverflow:!0,on:{init:function(){console.log(`‚úÖ Swiper (${t}) initialized`),console.log("Total slides:",this.slides.length)},slideChange:function(){console.log(`Current slide (${t}):`,this.realIndex+1)}}};return new Swiper(e.selector,n)}function r(){console.log("üü¢ Email gate initialized");const t=document.querySelector("[data-hero-section]"),n=document.querySelector("[data-email-gate]"),o=null==n?void 0:n.querySelector(".gate_form-block.w-form"),r=null==n?void 0:n.querySelector(".gate_sucess.w-form-done");if(!t||!n||!o)return void console.error("‚ùå Missing required elements");if(function(e){try{const t=localStorage.getItem(e.storageKey);if(!t)return console.log("üì≠ No submission found"),!1;if("true"===t)return console.log("üîÑ Old format detected, converting..."),i(e),!0;const n=JSON.parse(t);return(new Date).getTime()>n.expiry?(console.log("‚è∞ Submission expired, clearing..."),localStorage.removeItem(e.storageKey),!1):(console.log("‚úÖ Valid submission found"),!0===n.value)}catch(t){return console.warn("‚ö†Ô∏è Error checking storage:",t),!1}}(e))return console.log("‚úÖ User already submitted (within 7 days)"),void(n.style.display="none");let a,l=0,s=!1,d=!1;n.style.display="none",window.showEmailGate=()=>{console.log("üìß Showing gate"),l=window.pageYOffset||document.documentElement.scrollTop,n.style.display="flex",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${l}px`,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.classList.add("active")})})},window.hideEmailGate=()=>{console.log("üîí Hiding gate"),n.classList.remove("active"),setTimeout(()=>{n.style.display="none",document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("width"),document.body.style.removeProperty("top"),window.scrollTo({top:l,behavior:"auto"}),console.log("‚úÖ Gate hidden, scroll position restored")},e.animationDelay)},window.handleEmailSuccess=()=>{d||(d=!0,console.log("üéâ Form submitted successfully!"),i(e),console.log(`‚è±Ô∏è Hiding in ${e.hideDelay}ms...`),setTimeout(()=>{window.hideEmailGate()},e.hideDelay))};const c=new MutationObserver(()=>{if(d)return;const e=o.classList.contains("w-form-done"),t=!!r&&"none"!==window.getComputedStyle(r).display;(e||t)&&(console.log("‚úÖ Success detected"),window.handleEmailSuccess(),c.disconnect())});c.observe(o,{attributes:!0,attributeFilter:["style","class"]}),r&&c.observe(r,{attributes:!0,attributeFilter:["style","class"]});const u=()=>{if(d)return;const e=o.classList.contains("w-form-done"),t=!!r&&"none"!==window.getComputedStyle(r).display;(e||t)&&(console.log("‚úÖ Success detected via polling"),window.handleEmailSuccess(),a&&clearInterval(a))},f=()=>{if(s)return;const n=t.getBoundingClientRect(),i=window.innerHeight*e.triggerThreshold;n.bottom<=i&&(s=!0,console.log(`üìú Hero bottom reached ${100*e.triggerThreshold}% of viewport - triggering email gate`),window.showEmailGate(),a=setInterval(u,300),window.removeEventListener("scroll",p),window.removeEventListener("wheel",p),window.removeEventListener("touchmove",p))},p=function(e,t){let n;return function(...i){n||(e.apply(this,i),n=!0,setTimeout(()=>n=!1,t))}}(f,e.scrollThrottleMs);window.addEventListener("scroll",p,{passive:!0}),window.addEventListener("wheel",p,{passive:!0}),window.addEventListener("touchmove",p,{passive:!0}),f(),console.log(`‚úÖ Email gate ready - will trigger when hero bottom reaches ${100*e.triggerThreshold}% of viewport`)}function a(){o(t,"videos"),o(n,"cases")}function l(){window.addEventListener("load",r),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()}"undefined"!=typeof Swiper?l():window.addEventListener("load",()=>{"undefined"!=typeof Swiper?l():console.error("‚ùå Swiper library not found")})}(),function(){function e(){function e(e){return(e<10?"0":"")+e}function t(t){if(!isFinite(t)||t<0)return"00:00";var n=Math.floor(t),i=Math.floor(n/3600),o=Math.floor(n%3600/60),r=n%60;return i>0?i+":"+e(o)+":"+e(r):e(o)+":"+e(r)}function n(e,t){e.forEach(function(e){e.textContent=t})}function i(e){return e&&e.length?e.reduce(function(e,t){return(t.width||0)>(e.width||0)?t:e},e[0]):null}function o(e){var t=e.play();t&&"function"==typeof t.then&&t.catch(function(){})}function r(e,t){t||"true"===e.getAttribute("data-player-activated")||"idle"!==e.getAttribute("data-player-status")||e.setAttribute("data-player-status","ready")}function a(e,t,n,i){if("true"===t&&n&&i){var o=e.querySelector("[data-player-before]");o&&(o.style.paddingTop=i/n*100+"%")}}function l(e,t,n){if("true"===t){var i=e.querySelector("[data-player-before]");if(i)!(i.style.paddingTop&&"0%"!==i.style.paddingTop)&&n.videoWidth&&n.videoHeight&&a(e,t,n.videoWidth,n.videoHeight)}}document.querySelectorAll("[data-bunny-player-init]").forEach(function(e){var s=e.getAttribute("data-player-src");if(s){var d=e.querySelector("video");if(d){try{d.pause()}catch(J){}try{d.removeAttribute("src"),d.load()}catch(J){}e.hasAttribute("data-player-activated")||$(!1);var c=e.querySelector("[data-player-timeline]"),u=e.querySelector("[data-player-progress]"),f=e.querySelector("[data-player-buffered]"),p=e.querySelector("[data-player-timeline-handle]"),m=e.querySelectorAll("[data-player-time-duration]"),g=e.querySelectorAll("[data-player-time-progress]"),v=e.getAttribute("data-player-update-size"),w=e.getAttribute("data-player-lazy"),h="true"===w,y="meta"===w,b="true"===e.getAttribute("data-player-autoplay"),E="true"===e.getAttribute("data-player-muted"),S=!1;b?(V(!0),d.loop=!0):V(E),d.setAttribute("muted",""),d.setAttribute("playsinline",""),d.setAttribute("webkit-playsinline",""),d.playsInline=!0,void 0!==d.disableRemotePlayback&&(d.disableRemotePlayback=!0),b&&(d.autoplay=!1);var L=!!d.canPlayType("application/vnd.apple.mpegurl"),x=!(!window.Hls||!Hls.isSupported()||L);if("true"===v&&!y)if(h);else{var A=d.preload;d.preload="metadata";var T=function(){a(e,v,d.videoWidth,d.videoHeight),d.removeEventListener("loadedmetadata",T),d.preload=A||""};d.addEventListener("loadedmetadata",T,{once:!0}),d.src=s}var k,P,M=!1;if(y?(function(e,t){return new Promise(function(n){if(t&&window.Hls&&Hls.isSupported())try{var o=new Hls,r={width:0,height:0,duration:NaN};return o.on(Hls.Events.MANIFEST_PARSED,function(e,t){var n=i(t&&t.levels||o.levels||[]);n&&n.width&&n.height&&(r.width=n.width,r.height=n.height)}),o.on(Hls.Events.LEVEL_LOADED,function(e,t){t&&t.details&&isFinite(t.details.totalduration)&&(r.duration=t.details.totalduration)}),o.on(Hls.Events.ERROR,function(){try{o.destroy()}catch(J){}n(r)}),o.on(Hls.Events.LEVEL_LOADED,function(){try{o.destroy()}catch(J){}n(r)}),void o.loadSource(e)}catch(J){return void n({width:0,height:0,duration:NaN})}function a(e){for(var t=e.split(/\r?\n/),n=0,i=0,o=null,r=null,a=0;a<t.length;a++){var l=t[a];if(0===l.indexOf("#EXT-X-STREAM-INF:"))r=l;else if(r&&l&&"#"!==l[0]){o||(o=l.trim());var s=/RESOLUTION=(\d+)x(\d+)/.exec(r);if(s){var d=parseInt(s[1],10),c=parseInt(s[2],10);d>n&&(n=d,i=c)}r=null}}return{bestW:n,bestH:i,media:o}}function l(e){for(var t,n=0,i=/#EXTINF:([\d.]+)/g;t=i.exec(e);)n+=parseFloat(t[1]);return n}fetch(e,{credentials:"omit",cache:"no-store"}).then(function(e){if(!e.ok)throw new Error("master");return e.text()}).then(function(t){var i=a(t);if(i.media){var o=function(e,t){try{return new URL(t,e).toString()}catch(J){return t}}(e,i.media);return fetch(o,{credentials:"omit",cache:"no-store"}).then(function(e){if(!e.ok)throw new Error("media");return e.text()}).then(function(e){n({width:i.bestW||0,height:i.bestH||0,duration:l(e)})})}n({width:i.bestW||0,height:i.bestH||0,duration:NaN})}).catch(function(){n({width:0,height:0,duration:NaN})})})}(s,x).then(function(i){i.width&&i.height&&a(e,v,i.width,i.height),m.length&&isFinite(i.duration)&&i.duration>0&&n(m,t(i.duration)),r(e,S)}),d.preload="none"):h?d.preload="none":N(),document.addEventListener("fullscreenchange",function(){_(z())}),document.addEventListener("webkitfullscreenchange",function(){_(z())}),d.addEventListener("webkitbeginfullscreen",function(){_(!0)}),d.addEventListener("webkitendfullscreen",function(){_(!1)}),e.addEventListener("click",function(t){var n=t.target.closest("[data-player-control]");if(n&&e.contains(n)){var i=n.getAttribute("data-player-control");"play"===i||"pause"===i||"playpause"===i?d.paused||d.ended?(!h&&!y||M||N(),S=!0,I("loading"),o(d)):d.pause():"mute"===i?(d.muted=!d.muted,e.setAttribute("data-player-muted",d.muted?"true":"false")):"fullscreen"===i&&W()}}),d.addEventListener("timeupdate",B),d.addEventListener("loadedmetadata",function(){B(),l(e,v,d)}),d.addEventListener("loadeddata",function(){l(e,v,d)}),d.addEventListener("playing",function(){l(e,v,d)}),d.addEventListener("durationchange",B),d.addEventListener("progress",X),d.addEventListener("loadedmetadata",X),d.addEventListener("durationchange",X),d.addEventListener("play",function(){$(!0),cancelAnimationFrame(k),G(),I("playing")}),d.addEventListener("playing",function(){S=!1,I("playing")}),d.addEventListener("pause",function(){S=!1,cancelAnimationFrame(k),U(),I("paused")}),d.addEventListener("waiting",function(){I("loading")}),d.addEventListener("canplay",function(){r(e,S)}),d.addEventListener("ended",function(){S=!1,cancelAnimationFrame(k),U(),I("paused"),$(!1)}),c){let i=function(e){D||(D=c.getBoundingClientRect());var t=(e-D.left)/D.width;return t<0&&(t=0),t>1&&(t=1),t},r=function(e){if(d.duration){var i=100*e;u&&(u.style.transform="translateX("+(-100+i)+"%)"),p&&(p.style.left=i+"%"),g.length&&n(g,t(e*d.duration))}},a=function(e){d.duration&&(e-q<R||(q=e,d.currentTime=H))},l=function(t){if(d.duration){C=!0,(F=!d.paused&&!d.ended)&&d.pause(),e.setAttribute("data-timeline-drag","true"),D=c.getBoundingClientRect();var n=i(t.clientX);H=n*d.duration,r(n),a(performance.now()),c.setPointerCapture&&c.setPointerCapture(t.pointerId),window.addEventListener("pointermove",s,{passive:!1}),window.addEventListener("pointerup",f,{passive:!0}),t.preventDefault()}},s=function(e){if(C){var t=i(e.clientX);H=t*d.duration,r(t),a(performance.now()),e.preventDefault()}},f=function(){C&&(C=!1,e.setAttribute("data-timeline-drag","false"),D=null,d.currentTime=H,F?o(d):(U(),B()),window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",f))};var C=!1,F=!1,H=0,q=0,R=180,D=null;window.addEventListener("resize",function(){C||(D=null)}),c.addEventListener("pointerdown",l,{passive:!1}),p&&p.addEventListener("pointerdown",l,{passive:!1})}e.addEventListener("pointerdown",Y),document.addEventListener("fullscreenchange",Y),document.addEventListener("webkitfullscreenchange",Y);var O=!1;if(e.addEventListener("pointerenter",function(){Y(),O||(O=!0,window.addEventListener("pointermove",K,{passive:!0}))}),e.addEventListener("pointerleave",function(){j("idle"),clearTimeout(P),O&&(O=!1,window.removeEventListener("pointermove",K))}),b)new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.intersectionRatio>0?(!h&&!y||M||N(),d.paused?(S=!0,I("loading"),o(d)):I("playing")):d.paused||d.ended||(d.pause(),I("paused"))})},{threshold:.1}).observe(e)}}function I(t){e.getAttribute("data-player-status")!==t&&e.setAttribute("data-player-status",t)}function V(t){d.muted=!!t,e.setAttribute("data-player-muted",d.muted?"true":"false")}function _(t){e.setAttribute("data-player-fullscreen",t?"true":"false")}function $(t){e.setAttribute("data-player-activated",t?"true":"false")}function N(){if(!M){if(M=!0,e._hls){try{e._hls.destroy()}catch(J){}e._hls=null}if(L)d.preload=h||y?"auto":d.preload,d.src=s,d.addEventListener("loadedmetadata",function(){r(e,S),"true"===v&&a(e,v,d.videoWidth,d.videoHeight),m.length&&n(m,t(d.duration))},{once:!0});else if(x){var o=new Hls({maxBufferLength:10});o.attachMedia(d),o.on(Hls.Events.MEDIA_ATTACHED,function(){o.loadSource(s)}),o.on(Hls.Events.MANIFEST_PARSED,function(){if(r(e,S),"true"===v){var t=i(o.levels||[]);t&&t.width&&t.height&&a(e,v,t.width,t.height)}}),o.on(Hls.Events.LEVEL_LOADED,function(e,i){i&&i.details&&isFinite(i.details.totalduration)&&m.length&&n(m,t(i.details.totalduration))}),e._hls=o}else d.src=s}}function z(){return!(!document.fullscreenElement&&!document.webkitFullscreenElement)}function W(){z()||d.webkitDisplayingFullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():d.webkitDisplayingFullscreen&&"function"==typeof d.webkitExitFullscreen&&d.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():d.requestFullscreen?d.requestFullscreen():d.webkitSupportsFullscreen&&"function"==typeof d.webkitEnterFullscreen&&d.webkitEnterFullscreen()}function B(){m.length&&n(m,t(d.duration)),g.length&&n(g,t(d.currentTime))}function U(){if(d.duration){var e=d.currentTime/d.duration*100;u&&(u.style.transform="translateX("+(-100+e)+"%)"),p&&(p.style.left=e+"%")}}function G(){U(),d.paused||d.ended||(k=requestAnimationFrame(G))}function X(){if(f&&d.duration&&d.buffered.length){var e=d.buffered.end(d.buffered.length-1)/d.duration*100;f.style.transform="translateX("+(-100+e)+"%)"}}function j(t){e.getAttribute("data-player-hover")!==t&&e.setAttribute("data-player-hover",t)}function Y(){j("active"),clearTimeout(P),P=setTimeout(function(){j("idle")},3e3)}function K(t){var n=e.getBoundingClientRect();t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom&&Y()}})}document.addEventListener("DOMContentLoaded",function(){e()})}()}();
